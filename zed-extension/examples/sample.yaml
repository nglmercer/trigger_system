# Example Trigger System Rules
# This file demonstrates the syntax highlighting

# Basic rule with all components
- id: "payment-success"
  on: "payment.completed"
  priority: 10
  if:
    - field: "data.amount"
      operator: "GT"
      value: 100
      AND:
        - field: "data.currency"
          operator: "EQ"
          value: "USD"
  do:
    - type: "send-email"
      params:
        template: "payment-confirmation"
        to: "${data.customer.email}"

# Rule with different operators
- id: "user-login-check"
  on: "user.login"
  enabled: true
  if:
    - field: "data.failedAttempts"
      operator: "GTE"
      value: 3
      AND:
        - field: "data.lastLogin"
          operator: "EXISTS"
    - field: "data.status"
      operator: "IN"
      value: ["active", "pending"]
  do:
    - type: "log"
      params:
        level: "warning"
        message: "Multiple login attempts detected"

# Rule with regex matching
- id: "email-validation"
  on: "user.register"
  if:
    - field: "data.email"
      operator: "MATCHES"
      value: "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"
  do:
    - type: "validate-email"
